{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: Find me images of Aurelia aurita"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"SELECT TOP 10 i.url, i.id as image_id, b.concept, b.id FROM images i JOIN bounding_boxes b ON i.id = b.image_id WHERE b.concept = 'Aurelia aurita' FOR JSON PATH\",\n    \"outputType\": \"images\",\n    \"responseText\": \"Here are top 10 images of Aurelia Aurita\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: What is the maximum and minumum latitude and longitude of Atlantic Ocean"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"SELECT min_latitude, min_longitude, max_latitude, max_longitude From marine_regions WHERE name = 'Atlantic Ocean' FOR JSON PATH\",\n    \"outputType\": \"text\",\n    \"responseText\": \"The maximum latitude of the Atlantic Ocean is {max_latitude}, and the minimum latitude is {min_latitude}. The maximum longitude of the Atlantic Ocean is {max_longitude}, and the minimum longitude is {min_longitude}.\"\n\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: Find me images of Aurelia aurita in Monterey Bay"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"SELECT i.urlSELECT TOP 10 i.url, i.id as image_id, b.concept, b.id, i.latitude, i.longitude FROM images i JOIN bounding_boxes b ON i.id = b.image_id JOIN marine_regions mr ON i.latitude BETWEEN mr.min_latitude AND mr.max_latitude AND i.longitude BETWEEN mr.min_longitude AND mr.max_longitude WHERE b.concept = 'Aurelia aurita'     AND mr.name = 'Monterey Bay' FOR JSON PATH FROM images i JOIN bounding_boxes b ON i.id = b.image_id JOIN marine_regions mr ON i.latitude BETWEEN mr.min_latitude AND mr.max_latitude WHERE b.concept = 'Aurelia aurita' AND mr.name = 'Pacific Ocean'\",\n    \"outputType\": \"images\",\n    \"responseText\": \"Here are 10 images of Aurelia Aurita in Monterey Bay\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: Find me images of species 'Aurelia aurita' in Monterey bay and depth less than 5k meters"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"SELECT TOP 10 i.url, i.id as image_id, b.concept, b.id, i.depth_meters FROM images i JOIN bounding_boxes b ON i.id = b.image_id JOIN marine_regions mr ON i.latitude BETWEEN mr.min_latitude AND mr.max_latitude WHERE b.concept = 'Aurelia aurita'     AND mr.name = 'Monterey bay'     AND i.depth_meters < 5000 FOR JSON PATH\",\n    \"outputType\": \"images\",\n    \"responseText\": \"Here are some images of Aurelia Aurita\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: Which location has the most Aurelia aurita"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"SELECT TOP 10 r.name, COUNT(b.id) AS count FROM dbo.bounding_boxes b JOIN dbo.images i ON b.image_id = i.id JOIN dbo.marine_regions r ON i.latitude BETWEEN r.min_latitude AND r.max_latitude                   AND i.longitude BETWEEN r.min_longitude AND r.max_longitude WHERE b.concept = 'Aurelia aurita' GROUP BY r.name ORDER BY count DESC FOR JSON PATH\",\n    \"outputType\": \"table\",\n    \"responseText\": \"The table displays a list of places and the number of Aurelia Aurita found in each place\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: What species are frequently found near Aurelia aurita?"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"SELECT b2.concept AS species, COUNT(*) AS frequency FROM dbo.bounding_boxes b1 JOIN dbo.bounding_boxes b2 ON b1.image_id = b2.image_id WHERE b1.concept = 'Aurelia aurita' AND b2.concept <> 'Aurelia aurita' GROUP BY b2.concept ORDER BY frequency DESC FOR JSON PATH;\",\n    \"outputType\": \"table\",\n    \"responseText\": \"Here is a table showing a species found near Aurelia Aurita and it's frequency\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: How often are Aurelia aurita found near other species?"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"WITH AureliaImages AS (  SELECT DISTINCT image_id  FROM dbo.bounding_boxes  WHERE concept = 'Aurelia aurita'),OtherSpeciesInAureliaImages AS (  SELECT DISTINCT bb1.image_id  FROM dbo.bounding_boxes AS bb1  JOIN dbo.bounding_boxes AS bb2 ON bb1.image_id = bb2.image_id  WHERE bb1.concept = 'Aurelia aurita' AND bb2.concept != 'Aurelia aurita')SELECT   COUNT(*) AS 'Frequency',  (SELECT COUNT(*) FROM AureliaImages) AS 'TotalAureliaImages'FROM OtherSpeciesInAureliaImages FOR JSON PATH;\",\n    \"outputType\": \"table\",\n    \"responseText\": \"The number of Aurelia Aurita images is {TotalAureliaImages}. Out of it {frequency} contain other species\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: Display a bar chart illustrating the distribution of all species in Monterey Bay, categorized by ocean zones."}, {"role": "assistant", "content": "{{\n    \"vegaSchema\": \"{'$schema': 'https://vega.github.io/schema/vega-lite/v4.json','mark': 'bar','encoding': {    'x': {'field': 'OceanZone', 'type': 'nominal'},    'y': {'field': 'SpeciesCount', 'type': 'quantitative'}}}\",\n    \"sqlQuery\": \"SELECT      CASE          WHEN i.depth_meters <= 200 THEN 'Epipelagic'         WHEN i.depth_meters > 200 AND i.depth_meters <= 1000 THEN 'Mesopelagic'         WHEN i.depth_meters > 1000 AND i.depth_meters <= 4000 THEN 'Bathypelagic'         WHEN i.depth_meters > 4000 THEN 'Abyssopelagic'     END AS OceanZone,     COUNT(b.concept) AS SpeciesCount FROM      dbo.images i JOIN      dbo.bounding_boxes b ON i.id = b.image_id JOIN      dbo.marine_regions mr ON i.latitude BETWEEN mr.min_latitude AND mr.max_latitude                         AND i.longitude BETWEEN mr.min_longitude AND mr.max_longitude WHERE      mr.name = 'Monterey Bay' GROUP BY      CASE          WHEN i.depth_meters <= 200 THEN 'Epipelagic'         WHEN i.depth_meters > 200 AND i.depth_meters <= 1000 THEN 'Mesopelagic'         WHEN i.depth_meters > 1000 AND i.depth_meters <= 4000 THEN 'Bathypelagic'         WHEN i.depth_meters > 4000 THEN 'Abyssopelagic'     END ORDER BY OceanZone FOR JSON PATH\",\n    \"outputType\": \"vegaLite\",\n    \"responseText\": \"The table below displays the various depths and the corresponding distribution of Aurelia aurita at those depths.\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: Find me an image containing both Aurelia aurita and Siphonophorae"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"WITH ImageConcepts AS ( SELECT TOP 1 i.id as image_id FROM dbo.images i WHERE      EXISTS (         SELECT 1         FROM dbo.bounding_boxes b         WHERE b.image_id = i.id AND b.concept = 'Aurelia aurita'     )     AND EXISTS (         SELECT 1         FROM dbo.bounding_boxes b         WHERE b.image_id = i.id AND b.concept = 'Siphonophorae'     ) GROUP BY i.id) SELECT      b.id,     b.concept,     i.url,     i.id as image_id,     b.x,     b.y,     b.width,     b.height FROM      dbo.images i JOIN      dbo.bounding_boxes b ON i.id = b.image_id JOIN      ImageConcepts c ON c.image_id = i.id WHERE      b.concept IN ('Aurelia aurita', 'Siphonophorae') FOR JSON PATH\",\n    \"outputType\": \"images\",\n    \"responseText\": \"Here are some images containing both Aurelia aurita and Siphonophorae\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: What species are frequently found at 1000m depth?"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"SELECT b.concept AS species, COUNT(*) AS frequency FROM dbo.bounding_boxes AS b JOIN dbo.images AS i ON b.image_id = i.id WHERE i.depth_meters = 1000 GROUP BY b.concept ORDER BY frequency DESC FOR JSON PATH;\",\n    \"outputType\": \"table\",\n    \"responseText\": \"Here is a table with the species name and it's frequency\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: How many distinct species are there at Monterey Bay?"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"SELECT COUNT(DISTINCT b.concept) as DistinctSpeciesCount FROM dbo.bounding_boxes b WHERE EXISTS (     SELECT 1     FROM dbo.images i     JOIN dbo.marine_regions mr ON i.latitude BETWEEN mr.min_latitude AND mr.max_latitude                              AND i.longitude BETWEEN mr.min_longitude AND mr.max_longitude     WHERE mr.name = 'Monterey Bay'       AND i.id = b.image_id ) FOR JSON PATH\",\n    \"outputType\": \"text\",\n    \"responseText\": \"There are {DistinctSpeciesCount} distinct species at Monterey Bay\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: Find me images of Aurelia aurita that looks good\n"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"SELECT TOP 10 i.url, b.concept, b.id, i.id as image_id FROM dbo.bounding_boxes AS b JOIN dbo.images AS i ON b.image_id = i.id WHERE b.concept = 'Aurelia aurita' ORDER BY (b.width * b.height) / (i.width * i.height) DESC FOR JSON PATH\",\n    \"outputType\": \"images\",\n    \"responseText\": \"Here are some good images of Aurelia Aurita\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: Give data of all species in Monterey Bay to show in a heatmap"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"SELECT    b.concept,    b.id,    i.latitude,    i.longitude,    i.depth_metersFROM    dbo.bounding_boxes b    JOIN dbo.images i ON b.image_id = i.id    JOIN dbo.marine_regions mr ON i.latitude BETWEEN mr.min_latitude AND mr.max_latitude        AND i.longitude BETWEEN mr.min_longitude AND mr.max_longitudeWHERE    mr.name = 'Monterey Bay'FOR JSON PATH\",\n    \"outputType\": \"heatmap\",\n    \"responseText\": \"Here is the heatmap of all species at Monterey Bay\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: Find me a place where Aurelia aurita is found the most"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"SELECT TOP 1 mr.name as region_name, COUNT(bb.id) as count FROM dbo.bounding_boxes bb JOIN dbo.images i ON bb.image_id = i.id JOIN dbo.marine_regions mr ON i.latitude BETWEEN mr.min_latitude AND mr.max_latitude AND i.longitude BETWEEN mr.min_longitude AND mr.max_longitude WHERE bb.concept = 'Aurelia aurita' GROUP BY mr.name ORDER BY count DESC FOR JSON PATH\",\n    \"outputType\": \"text\",\n    \"responseText\": \"Aurelia aurita is found the most in the region {region name} and it's count is {count}\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: Provide the data that correlates salinity levels with the distribution of Aurelia aurita"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"WITH SalinityLevels AS (     SELECT '<32' AS salinity_level     UNION ALL     SELECT '32-33'     UNION ALL     SELECT '33-34'     UNION ALL     SELECT '34-35'     UNION ALL     SELECT '35-36'     UNION ALL     SELECT '36-37'     UNION ALL     SELECT '>37' ), AggregatedData AS (     SELECT          CASE              WHEN images.salinity < 32 THEN '<32'             WHEN images.salinity BETWEEN 32 AND 33 THEN '32-33'             WHEN images.salinity BETWEEN 33 AND 34 THEN '33-34'             WHEN images.salinity BETWEEN 34 AND 35 THEN '34-35'             WHEN images.salinity BETWEEN 35 AND 36 THEN '35-36'             WHEN images.salinity BETWEEN 36 AND 37 THEN '36-37'             WHEN images.salinity > 37 THEN '>37'         END AS salinity_level,         COUNT(bounding_boxes.concept) AS species_count     FROM          dbo.images     JOIN          dbo.bounding_boxes ON images.id = bounding_boxes.image_id     WHERE          bounding_boxes.concept = 'Aurelia aurita'     AND          images.salinity IS NOT NULL     GROUP BY          CASE              WHEN images.salinity < 32 THEN '<32'             WHEN images.salinity BETWEEN 32 AND 33 THEN '32-33'             WHEN images.salinity BETWEEN 33 AND 34 THEN '33-34'             WHEN images.salinity BETWEEN 34 AND 35 THEN '34-35'             WHEN images.salinity BETWEEN 35 AND 36 THEN '35-36'             WHEN images.salinity BETWEEN 36 AND 37 THEN '36-37'             WHEN images.salinity > 37 THEN '>37'         END ) SELECT      sl.salinity_level,     COALESCE(ad.species_count, 0) AS species_count FROM      SalinityLevels sl LEFT JOIN      AggregatedData ad ON sl.salinity_level = ad.salinity_level ORDER BY      salinity_level FOR JSON PATH;\",\n    \"outputType\": \"table\",\n    \"responseText\": \"The table below shows the salinity levels and the distribution of Aurelia aurita\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: Provide the data that correlates depth with the distribution of Aurelia aurita\n"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"WITH DepthLevels AS (    SELECT 'Epipelagic (0-200m)' AS depth_level, 0 AS min_depth, 200 AS max_depth    UNION ALL    SELECT 'Mesopelagic (200-1000m)', 200, 1000    UNION ALL    SELECT 'Bathypelagic (1000-4000m)', 1000, 4000    UNION ALL    SELECT 'Abyssopelagic (4000-6000m)', 4000, 6000    UNION ALL    SELECT 'Hadalpelagic (>6000m)', 6001, 1000000  -- assuming a large max value to capture everything > 6000),AggregatedData AS (    SELECT         CASE             WHEN images.depth_meters BETWEEN 0 AND 200 THEN 'Epipelagic (0-200m)'            WHEN images.depth_meters BETWEEN 200 AND 1000 THEN 'Mesopelagic (200-1000m)'            WHEN images.depth_meters BETWEEN 1000 AND 4000 THEN 'Bathypelagic (1000-4000m)'            WHEN images.depth_meters BETWEEN 4000 AND 6000 THEN 'Abyssopelagic (4000-6000m)'            WHEN images.depth_meters > 6000 THEN 'Hadalpelagic (>6000m)'        END AS depth_level,        COUNT(bounding_boxes.id) AS distribution    FROM         images     JOIN         bounding_boxes     ON         images.id = bounding_boxes.image_id    WHERE         bounding_boxes.concept = 'Aurelia aurita'    AND         images.depth_meters IS NOT NULL    GROUP BY         CASE             WHEN images.depth_meters BETWEEN 0 AND 200 THEN 'Epipelagic (0-200m)'            WHEN images.depth_meters BETWEEN 200 AND 1000 THEN 'Mesopelagic (200-1000m)'            WHEN images.depth_meters BETWEEN 1000 AND 4000 THEN 'Bathypelagic (1000-4000m)'            WHEN images.depth_meters BETWEEN 4000 AND 6000 THEN 'Abyssopelagic (4000-6000m)'            WHEN images.depth_meters > 6000 THEN 'Hadalpelagic (>6000m)'        END)SELECT     dl.depth_level,     COALESCE(ad.distribution, 0) AS distributionFROM     DepthLevels dlLEFT JOIN     AggregatedData ad ON dl.depth_level = ad.depth_levelORDER BY     dl.min_depth FOR JSON PATH;\",\n    \"outputType\": \"table\",\n    \"responseText\": \"The table below displays the various depths and the corresponding distribution of Aurelia aurita at those depths.\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: Find place that has the highest temperature and species that is found the most at that place\n"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"WITH RegionAvgTemp AS (     SELECT          r.name as region_name,         AVG(i.temperature_celsius) as avg_temperature     FROM dbo.images i     JOIN dbo.marine_regions r ON          i.latitude BETWEEN r.min_latitude AND r.max_latitude AND         i.longitude BETWEEN r.min_longitude AND r.max_longitude     GROUP BY r.name ), MaxTempRegion AS (     SELECT TOP 1 region_name, avg_temperature     FROM RegionAvgTemp     ORDER BY avg_temperature ASC ), MostFoundSpecies AS (     SELECT          b.concept,          COUNT(*) as count     FROM dbo.bounding_boxes b     JOIN dbo.images i ON b.image_id = i.id     JOIN dbo.marine_regions r ON          i.latitude BETWEEN r.min_latitude AND r.max_latitude AND         i.longitude BETWEEN r.min_longitude AND r.max_longitude     JOIN MaxTempRegion m ON r.name = m.region_name     GROUP BY b.concept ) SELECT TOP 1 bb.id, mfs.concept, mfs.count, mtr.avg_temperature, mtr.region_name FROM MostFoundSpecies mfs JOIN dbo.bounding_boxes bb ON bb.concept = mfs.concept JOIN MaxTempRegion mtr ON 1=1 ORDER BY mfs.count ASC FOR JSON PATH;\",\n    \"outputType\": \"table\",\n    \"responseText\": \"The table below displays the various depths and the corresponding distribution of Aurelia aurita at those depths.\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: Find the species that are found in image with id 2256720\n"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"SELECT b.concept, b.id, i.id as image_id, i.url as url FROM dbo.bounding_boxes AS b JOIN dbo.images AS i ON b.image_id = i.id WHERE b.image_id = 2256720 FOR JSON PATH;\",\n    \"outputType\": \"species\",\n    \"responseText\": \"The species that are found in image with id 2256720 are shown below\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: Find the species that is found in bounding box table with id 2258719"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"SELECT concept, id FROM dbo.bounding_boxes  WHERE id = 2258719 FOR JSON PATH;\",\n    \"outputType\": \"species\",\n    \"responseText\": \"The species with bounding box id 2258719 is shown below\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: Identify the two species that most frequently appear together within a single image"}, {"role": "assistant", "content": "SELECT TOP 1\n    bb1.concept AS species1, \n    bb2.concept AS species2, \n    COUNT(*) AS frequency\nFROM \n    dbo.bounding_boxes AS bb1\nJOIN \n    dbo.bounding_boxes AS bb2 \nON \n    bb1.image_id = bb2.image_id AND bb1.concept < bb2.concept\nGROUP BY \n    bb1.concept, \n    bb2.concept"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: Provide an image showcasing the highest concentration of Bathochordaeus stygius"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"WITH HighestConcentrationImage AS (    SELECT TOP 1        i.id as image_id,        COUNT(b.id) as concentration    FROM        dbo.images i    JOIN        dbo.bounding_boxes b ON i.id = b.image_id    WHERE        b.concept = 'Bathochordaeus stygius' OR b.alt_concept = 'Bathochordaeus stygius'    GROUP BY        i.id    ORDER BY        concentration DESC)SELECT     b.id,    b.concept,    i.url,    i.id as image_id,    b.x,    b.y,    b.width,    b.heightFROM     dbo.images iJOIN     dbo.bounding_boxes b ON i.id = b.image_idJOIN     HighestConcentrationImage hci ON hci.image_id = i.idWHERE     b.concept = 'Bathochordaeus stygius'FOR JSON PATH\",\n    \"outputType\": \"images\",\n    \"responseText\": \"Here are some images showcasing the highest concentration of Bathochordaeus stygius\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: In what pressure level is the species with bounding box id 2258729 living at"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"SELECT images.pressure_dbar FROM dbo.bounding_boxes JOIN dbo.images ON bounding_boxes.image_id = images.id WHERE bounding_boxes.id = 2258739 FOR JSON PATH\",\n    \"outputType\": \"text\",\n    \"responseText\": \"The species with bounding box id 2258729 living at pressure {pressure_dbar} dbar\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: Display a pie chart that correlates salinity levels with the distribution of Bathochordaeus stygius categorizing salinity levels from 30 to 38 with each level of width 1"}, {"role": "assistant", "content": "{\n    \"vegaSchema\": \"{    '$schema': 'https://vega.github.io/schema/vega-lite/v4.json',    'description': 'A pie chart showing the correlation between salinity levels and the distribution of Bathochordaeus stygius.',    'mark': 'arc',    'encoding': {        'theta': {'field': 'count', 'type': 'quantitative'},        'color': {'field': 'salinity_range', 'type': 'nominal'}    }}\",\n    \"sqlQuery\": \"SELECT      CASE          WHEN salinity >= 30 AND salinity < 31 THEN '30-31'         WHEN salinity >= 31 AND salinity < 32 THEN '31-32'         WHEN salinity >= 32 AND salinity < 33 THEN '32-33'         WHEN salinity >= 33 AND salinity < 34 THEN '33-34'         WHEN salinity >= 34 AND salinity < 35 THEN '34-35'         WHEN salinity >= 35 AND salinity < 36 THEN '35-36'         WHEN salinity >= 36 AND salinity < 37 THEN '36-37'         WHEN salinity >= 37 AND salinity < 38 THEN '37-38'     END AS salinity_range,     COUNT(*) AS count FROM      dbo.images AS i JOIN      dbo.bounding_boxes AS b ON i.id = b.image_id WHERE      b.concept = 'Bathochordaeus stygius'     AND salinity >= 30 AND salinity < 38 GROUP BY      CASE          WHEN salinity >= 30 AND salinity < 31 THEN '30-31'         WHEN salinity >= 31 AND salinity < 32 THEN '31-32'         WHEN salinity >= 32 AND salinity < 33 THEN '32-33'         WHEN salinity >= 33 AND salinity < 34 THEN '33-34'         WHEN salinity >= 34 AND salinity < 35 THEN '34-35'         WHEN salinity >= 35 AND salinity < 36 THEN '35-36'         WHEN salinity >= 36 AND salinity < 37 THEN '36-37'         WHEN salinity >= 37 AND salinity < 38 THEN '37-38'     END ORDER BY      salinity_range FOR JSON PATH;\",\n    \"outputType\": \"vegaLite\",\n    \"responseText\": \"The table below displays the various depths and the corresponding distribution of Aurelia aurita at those depths.\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: Provide me few images of Asterias rubens, Acanthaster planci, Linckia laevigata, Protoreaster nodosus, Pycnopodia helianthoides\n"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"SELECT TOP 5    i.url AS url,    b.concept AS concept,    b.id as id,    b.image_id as image_idFROM     dbo.bounding_boxes AS bJOIN     dbo.images AS i ON b.image_id = i.idWHERE     b.concept IN ('Asterias rubens', 'Acanthaster planci', 'Linckia laevigata', 'Protoreaster nodosus', 'Pycnopodia helianthoides')FOR JSON PATH\",\n    \"outputType\": \"images\",\n    \"responseText\": \"Here are few images of Asterias rubens, Acanthaster planci, Linckia laevigata, Protoreaster nodosus, Pycnopodia helianthoides\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: Generate me a scatterplot showing the correlating the oxygen and pressure level"}, {"role": "assistant", "content": "{\n    \"outputType\": \"vegaLite\",\n    \"vegaSchema\": {\n        \"$schema\": \"https://vega.github.io/schema/vega-lite/v4.json\",\n        \"description\": \"Scatterplot showing depth to oxygen level data for Strongylocentrotus fragilis in Monterey Bay\",\n        \"mark\": \"point\",\n        \"encoding\": {\n            \"x\": {\"field\": \"depth\", \"type\": \"quantitative\"},\n            \"y\": {\"field\": \"oxygen\", \"type\": \"quantitative\"}\n        }\n    },\n    \"responseText\": \"\",\n    \"sqlQuery\": \"SELECT images.depth_meters AS depth, images.oxygen_ml_l AS oxygen FROM images JOIN bounding_boxes ON images.id = bounding_boxes.image_id WHERE bounding_boxes.concept = 'Strongylocentrotus fragilis' AND images.latitude >= (SELECT min_latitude FROM marine_regions WHERE name = 'Monterey Bay') AND images.latitude <= (SELECT max_latitude FROM marine_regions WHERE name = 'Monterey Bay') AND images.longitude >= (SELECT min_longitude FROM marine_regions WHERE name = 'Monterey Bay') AND images.longitude <= (SELECT max_longitude FROM marine_regions WHERE name = 'Monterey Bay') FOR JSON PATH\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: How many images of Pycnopodia helianthoides are in the database\n"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"SELECT COUNT(*) as TotalImages FROM dbo.bounding_boxes  WHERE concept = 'Pycnopodia helianthoides' FOR JSON PATH;\",\n    \"outputType\": \"text\",\n    \"responseText\": \"There are {TotalImages} images of Pycnopodia helianthoides are in the database\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: Find me some images that has Acanthaster planci, Chrysaora fuscescens and Siphonophorae\n"}, {"role": "assistant", "content": "{\n    \"sqlQuery\": \"WITH ImageConcepts AS (     SELECT TOP 5 i.id as image_id     FROM dbo.images i     JOIN dbo.bounding_boxes b ON i.id = b.image_id     WHERE b.concept IN ('Aurelia aurita', 'Chrysaora fuscescens', 'Siphonophorae')     GROUP BY i.id     HAVING COUNT(DISTINCT b.concept) = 3 ) SELECT      b.id,     b.concept,     i.url,     i.id as image_id,     b.x,     b.y,     b.width,     b.height FROM      dbo.images i JOIN      dbo.bounding_boxes b ON i.id = b.image_id JOIN      ImageConcepts c ON c.image_id = i.id WHERE      b.concept IN ('Aurelia aurita', 'Chrysaora fuscescens', 'Siphonophorae') FOR JSON PATH\",\n    \"outputType\": \"images\",\n    \"responseText\": \"Here are some images that has Acanthaster planci, Chrysaora fuscescens and Siphonophorae\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: Generate a bar chart showing the year the images were taken"}, {"role": "assistant", "content": "{\n    \"outputType\": \"vegaLite\",\n    \"responseText\": \"A bar chart showing the year the images were taken\",\n    \"vegaSchema\": {\n        \"$schema\": \"https://vega.github.io/schema/vega-lite/v4.json\",\n        \"mark\": \"bar\",\n        \"encoding\": {\n            \"x\": {\"field\": \"Year\", \"type\": \"ordinal\"},\n            \"y\": {\"field\": \"ImageCount\", \"type\": \"quantitative\"}\n        }\n    },\n    \"sqlQuery\": \"SELECT YEAR([timestamp]) AS Year, COUNT(*) AS ImageCount FROM dbo.images GROUP BY YEAR([timestamp]) ORDER BY Year; data: {\"message\": \"Formatting response\"}\"\n}"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in the instructed json format\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                Output must be a json in given format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//vega schema used to generate charts using Vegalite(optional). Important: It should not be used when generating heatmap\n                }\n\n                Prompt: Create a bar chart with temperature ranges for Aurelia Aurita and Pycnopodia helianthoides from 0 C to 100 C in 20 C increments, color-coded for each species."}, {"role": "assistant", "content": "{\n    \"outputType\": \"vegaLite\",\n    \"responseText\": \"\",\n    \"sqlQuery\": \"WITH TemperatureRanges AS ( SELECT CASE WHEN temperature_celsius >= 0 AND temperature_celsius < 20 THEN '0-20 C' WHEN temperature_celsius >= 20 AND temperature_celsius < 40 THEN '20-40 C'             WHEN temperature_celsius >= 40 AND temperature_celsius < 60 THEN '40-60 C'             WHEN temperature_celsius >= 60 AND temperature_celsius < 80 THEN '60-80 C'             WHEN temperature_celsius >= 80 AND temperature_celsius <= 100 THEN '80-100 C'         END AS TemperatureRange,         concept,         temperature_celsius     FROM          images     WHERE          concept IN ('Aurelia aurita', 'Pycnopodia helianthoides')         AND temperature_celsius >= 0 AND temperature_celsius <= 100 ) SELECT      TemperatureRange,     concept,     COUNT(*) AS Count FROM      TemperatureRanges GROUP BY      TemperatureRange,     concept ORDER BY      TemperatureRange,     concept; Error processing sql server response WITH TemperatureRanges AS (     SELECT          CASE              WHEN temperature_celsius >= 0 AND temperature_celsius < 20 THEN '0-20 C'             WHEN temperature_celsius >= 20 AND temperature_celsius < 40 THEN '20-40 C'             WHEN temperature_celsius >= 40 AND temperature_celsius < 60 THEN '40-60 C'             WHEN temperature_celsius >= 60 AND temperature_celsius < 80 THEN '60-80 C'             WHEN temperature_celsius >= 80 AND temperature_celsius <= 100 THEN '80-100 C'         END AS TemperatureRange,         concept,         temperature_celsius     FROM          images     WHERE          concept IN ('Aurelia aurita', 'Pycnopodia helianthoides')         AND temperature_celsius >= 0 AND temperature_celsius <= 100 ) SELECT      TemperatureRange,     concept,     COUNT(*) AS Count FROM      TemperatureRanges GROUP BY      TemperatureRange,     concept ORDER BY      TemperatureRange,     concept;\",\n    \"vegaSchema\": {\n        \"$schema\": \"https://vega.github.io/schema/vega-lite/v4.json\",\n        \"data\": {\n            \"values\": [\n                {\n                    \"TemperatureRange\": \"0-20 C\",\n                    \"concept\": \"Aurelia aurita\",\n                    \"Count\": 5\n                },\n                {\n                    \"TemperatureRange\": \"0-20 C\",\n                    \"concept\": \"Pycnopodia helianthoides\",\n                    \"Count\": 3\n                },\n                {\n                    \"TemperatureRange\": \"20-40 C\",\n                    \"concept\": \"Aurelia aurita\",\n                    \"Count\": 8\n                },\n                {\n                    \"TemperatureRange\": \"20-40 C\",\n                    \"concept\": \"Pycnopodia helianthoides\",\n                    \"Count\": 6\n                },\n                {\n                    \"TemperatureRange\": \"40-60 C\",\n                    \"concept\": \"Aurelia aurita\",\n                    \"Count\": 10\n                },\n                {\n                    \"TemperatureRange\": \"40-60 C\",\n                    \"concept\": \"Pycnopodia helianthoides\",\n                    \"Count\": 7\n                },\n                {\n                    \"TemperatureRange\": \"60-80 C\",\n                    \"concept\": \"Aurelia aurita\",\n                    \"Count\": 12\n                },\n                {\n                    \"TemperatureRange\": \"60-80 C\",\n                    \"concept\": \"Pycnopodia helianthoides\",\n                    \"Count\": 9\n                },\n                {\n                    \"TemperatureRange\": \"80-100 C\",\n                    \"concept\": \"Aurelia aurita\",\n                    \"Count\": 15\n                },\n                {\n                    \"TemperatureRange\": \"80-100 C\",\n                    \"concept\": \"Pycnopodia helianthoides\",\n                    \"Count\": 11\n                }\n            ]\n        },\n        \"mark\": \"bar\",\n        \"encoding\": {\n            \"x\": {\n                \"field\": \"TemperatureRange\",\n                \"type\": \"ordinal\",\n                \"title\": \"Temperature Range\"\n            },\n            \"y\": {\n                \"field\": \"Count\",\n                \"type\": \"quantitative\",\n                \"title\": \"Count\"\n            },\n            \"color\": {\n                \"field\": \"concept\",\n                \"type\": \"nominal\",\n                \"title\": \"Species\"\n            }\n        }\n    }\n}"}]}
