{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: Find me images of Aurelia aurita"}, {"role": "assistant", "content": "Observation:To find the images from the database I need to format the output such that it is a json and has species array that has species concept as concept, image url as url, image id as image_id and species bounding box id as id\nSince the prompt does not specify number of images. Limit the query to top 10 images\nJSON:```{\n    \"sqlQuery\": \"SELECT TOP 10 i.url, i.id as image_id, b.concept, b.id FROM images i JOIN bounding_boxes b ON i.id = b.image_id WHERE b.concept = 'Aurelia aurita' FOR JSON PATH\",\n    \"outputType\": \"images\",\n    \"responseText\": \"Here are top 10 images of Aurelia Aurita\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: What is the maximum and minumum latitude and longitude of Atlantic Ocean"}, {"role": "assistant", "content": "Observation:The prompt asks to find maximum and minumum latitude and longitude of Atlantic Ocean. It can be found based on the marine_regions table\nJSON:```{\n    \"sqlQuery\": \"SELECT min_latitude, min_longitude, max_latitude, max_longitude From marine_regions WHERE name = 'Atlantic Ocean' FOR JSON PATH\",\n    \"outputType\": \"text\",\n    \"responseText\": \"The maximum latitude of the Atlantic Ocean is {max_latitude}, and the minimum latitude is {min_latitude}. The maximum longitude of the Atlantic Ocean is {max_longitude}, and the minimum longitude is {min_longitude}.\"\n\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: Find me images of Aurelia aurita in Monterey Bay"}, {"role": "assistant", "content": "Observation:To find the images from the database I need to format the output such that it is a json and has species array that has species concept as concept, image url as url, image id as image_id and species bounding box id as id\nThe prompt is asking image for a particular region, so its better to add the latitude and longitude information to the species data too. Since you need to find the images of Aurelia aurita in Monterey Bay, use the marine_regions table to lookup the Monterey Bay min/max latitude/longitude values to search for images.\nSince the prompt does not specify number of images. Limit the query to top 10 images\nJSON:```{\n    \"sqlQuery\": \"SELECT i.urlSELECT TOP 10 i.url, i.id as image_id, b.concept, b.id, i.latitude, i.longitude FROM images i JOIN bounding_boxes b ON i.id = b.image_id JOIN marine_regions mr ON i.latitude BETWEEN mr.min_latitude AND mr.max_latitude AND i.longitude BETWEEN mr.min_longitude AND mr.max_longitude WHERE b.concept = 'Aurelia aurita'     AND mr.name = 'Monterey Bay' FOR JSON PATH FROM images i JOIN bounding_boxes b ON i.id = b.image_id JOIN marine_regions mr ON i.latitude BETWEEN mr.min_latitude AND mr.max_latitude WHERE b.concept = 'Aurelia aurita' AND mr.name = 'Pacific Ocean'\",\n    \"outputType\": \"images\",\n    \"responseText\": \"Here are 10 images of Aurelia Aurita in Monterey Bay\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: Find me images of species 'Aurelia aurita' in Monterey bay and depth less than 5k meters"}, {"role": "assistant", "content": "Observation:You need to find the images from the database so you need to format the output such that it is a json and has species array that has species concept as concept, image url as url, image id as image_id and species bounding box id as id\nThe prompt asks for species at depth less than 5k, so add the depth data too.\nUse the bounding_boxes, images and marine_regions table to find the species images\nJSON:```{\n    \"sqlQuery\": \"SELECT TOP 10 i.url, i.id as image_id, b.concept, b.id, i.depth_meters FROM images i JOIN bounding_boxes b ON i.id = b.image_id JOIN marine_regions mr ON i.latitude BETWEEN mr.min_latitude AND mr.max_latitude WHERE b.concept = 'Aurelia aurita'     AND mr.name = 'Monterey bay'     AND i.depth_meters < 5000 FOR JSON PATH\",\n    \"outputType\": \"images\",\n    \"responseText\": \"Here are some images of Aurelia Aurita\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: Which location has the most Aurelia aurita"}, {"role": "assistant", "content": "Observation:The prompt asks for location that has the most Aurelia aurita. The prompt does not provide detail on what location would mean. So, use the marine_regions table and find the count of bounding boxes of Aurelia aurita in the regions, sort them from highest and smallest and output the top 15 results\n\nJSON:```{\n    \"sqlQuery\": \"SELECT TOP 10 r.name, COUNT(b.id) AS count FROM dbo.bounding_boxes b JOIN dbo.images i ON b.image_id = i.id JOIN dbo.marine_regions r ON i.latitude BETWEEN r.min_latitude AND r.max_latitude                   AND i.longitude BETWEEN r.min_longitude AND r.max_longitude WHERE b.concept = 'Aurelia aurita' GROUP BY r.name ORDER BY count DESC FOR JSON PATH\",\n    \"outputType\": \"table\",\n    \"responseText\": \"The table displays a list of places and the number of Aurelia Aurita found in each place\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: What species are frequently found near Aurelia aurita?"}, {"role": "assistant", "content": "Observation:The prompt asks for frequently found species near Aurelia aurita without providing detail what frequent means numerically. So, find the number of images that have Aurelia aurita and another species. Use the bounding_boxes table to find another species that is near Aurelia aurita and output the name and the frequency\n\nJSON:```{\n    \"sqlQuery\": \"SELECT b2.concept AS species, COUNT(*) AS frequency FROM dbo.bounding_boxes b1 JOIN dbo.bounding_boxes b2 ON b1.image_id = b2.image_id WHERE b1.concept = 'Aurelia aurita' AND b2.concept <> 'Aurelia aurita' GROUP BY b2.concept ORDER BY frequency DESC FOR JSON PATH;\",\n    \"outputType\": \"table\",\n    \"responseText\": \"Here is a table showing a species found near Aurelia Aurita and it's frequency\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: How often are Aurelia aurita found near other species?"}, {"role": "assistant", "content": "Observation:The prompt does not provide what often would mean numerically, so first find all distinct images in the database that has Aurelia aurita. Now, find the images that have Aurelia aurita and another species. Now output the total AureliaImages and images that have other species\n\nJSON:```{\n    \"sqlQuery\": \"WITH AureliaImages AS (  SELECT DISTINCT image_id  FROM dbo.bounding_boxes  WHERE concept = 'Aurelia aurita'),OtherSpeciesInAureliaImages AS (  SELECT DISTINCT bb1.image_id  FROM dbo.bounding_boxes AS bb1  JOIN dbo.bounding_boxes AS bb2 ON bb1.image_id = bb2.image_id  WHERE bb1.concept = 'Aurelia aurita' AND bb2.concept != 'Aurelia aurita')SELECT   COUNT(*) AS 'Frequency',  (SELECT COUNT(*) FROM AureliaImages) AS 'TotalAureliaImages'FROM OtherSpeciesInAureliaImages FOR JSON PATH;\",\n    \"outputType\": \"table\",\n    \"responseText\": \"The number of Aurelia Aurita images is {TotalAureliaImages}. Out of it {frequency} contain other species\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: Display a bar chart illustrating the distribution of all species in Monterey Bay, categorized by ocean zones."}, {"role": "assistant", "content": "Observation:The prompt asks to display a chart, I will be using vega lite to display it. I should first generate the vega lite schema and then generate a sql query that outputs the data that will be used by vega lite according to the schema\nJSON:```{{\n    \"vegaSchema\": \"{'$schema': 'https://vega.github.io/schema/vega-lite/v4.json','mark': 'bar','encoding': {    'x': {'field': 'OceanZone', 'type': 'nominal'},    'y': {'field': 'SpeciesCount', 'type': 'quantitative'}}}\",\n    \"sqlQuery\": \"SELECT      CASE          WHEN i.depth_meters <= 200 THEN 'Epipelagic'         WHEN i.depth_meters > 200 AND i.depth_meters <= 1000 THEN 'Mesopelagic'         WHEN i.depth_meters > 1000 AND i.depth_meters <= 4000 THEN 'Bathypelagic'         WHEN i.depth_meters > 4000 THEN 'Abyssopelagic'     END AS OceanZone,     COUNT(b.concept) AS SpeciesCount FROM      dbo.images i JOIN      dbo.bounding_boxes b ON i.id = b.image_id JOIN      dbo.marine_regions mr ON i.latitude BETWEEN mr.min_latitude AND mr.max_latitude                         AND i.longitude BETWEEN mr.min_longitude AND mr.max_longitude WHERE      mr.name = 'Monterey Bay' GROUP BY      CASE          WHEN i.depth_meters <= 200 THEN 'Epipelagic'         WHEN i.depth_meters > 200 AND i.depth_meters <= 1000 THEN 'Mesopelagic'         WHEN i.depth_meters > 1000 AND i.depth_meters <= 4000 THEN 'Bathypelagic'         WHEN i.depth_meters > 4000 THEN 'Abyssopelagic'     END ORDER BY OceanZone FOR JSON PATH\",\n    \"outputType\": \"vegaLite\",\n    \"responseText\": \"The table below displays the various depths and the corresponding distribution of Aurelia aurita at those depths.\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: Find me an image containing both Aurelia aurita and Siphonophorae"}, {"role": "assistant", "content": "Observation:The prompt asks for an image of individual species so, You need to find the images from the database so you need to format the output such that it is a json and has species array that has species concept as concept, image url as url, image id as image_id and species bounding box id as id.\nAlso since you are showing images that has more than one species, add the bounding box data x, y, width, height.\nSince you need to output data as species array, first you will get the image id that has both concepts. After that you can search the database using the image id to generate the data in json format with id, concept, url, image_id, x, y, width and height values\n\nJSON:```{\n    \"sqlQuery\": \"WITH ImageConcepts AS ( SELECT TOP 1 i.id as image_id FROM dbo.images i WHERE      EXISTS (         SELECT 1         FROM dbo.bounding_boxes b         WHERE b.image_id = i.id AND b.concept = 'Aurelia aurita'     )     AND EXISTS (         SELECT 1         FROM dbo.bounding_boxes b         WHERE b.image_id = i.id AND b.concept = 'Siphonophorae'     ) GROUP BY i.id) SELECT      b.id,     b.concept,     i.url,     i.id as image_id,     b.x,     b.y,     b.width,     b.height FROM      dbo.images i JOIN      dbo.bounding_boxes b ON i.id = b.image_id JOIN      ImageConcepts c ON c.image_id = i.id WHERE      b.concept IN ('Aurelia aurita', 'Siphonophorae') FOR JSON PATH\",\n    \"outputType\": \"images\",\n    \"responseText\": \"Here are some images containing both Aurelia aurita and Siphonophorae\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: What species are frequently found at 1000m depth?"}, {"role": "assistant", "content": "Observation:The prompt is asking the frequency of species found at depth of 1000m, so output freuqency data of species name with the frequency using the bounding_boxes and images table\n\nJSON:```{\n    \"sqlQuery\": \"SELECT b.concept AS species, COUNT(*) AS frequency FROM dbo.bounding_boxes AS b JOIN dbo.images AS i ON b.image_id = i.id WHERE i.depth_meters = 1000 GROUP BY b.concept ORDER BY frequency DESC FOR JSON PATH;\",\n    \"outputType\": \"table\",\n    \"responseText\": \"Here is a table with the species name and it's frequency\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: How many distinct species are there at Monterey Bay?"}, {"role": "assistant", "content": "Observation:The species is asking for number of distinct species in Monterey Bay, so use the bounding_boxes and marine_regions table from database to find the number of species\n\nJSON:```{\n    \"sqlQuery\": \"SELECT COUNT(DISTINCT b.concept) as DistinctSpeciesCount FROM dbo.bounding_boxes b WHERE EXISTS (     SELECT 1     FROM dbo.images i     JOIN dbo.marine_regions mr ON i.latitude BETWEEN mr.min_latitude AND mr.max_latitude                              AND i.longitude BETWEEN mr.min_longitude AND mr.max_longitude     WHERE mr.name = 'Monterey Bay'       AND i.id = b.image_id ) FOR JSON PATH\",\n    \"outputType\": \"text\",\n    \"responseText\": \"There are {DistinctSpeciesCount} distinct species at Monterey Bay\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: Find me images of Aurelia aurita that looks good\n"}, {"role": "assistant", "content": "Observation:The prompt asks for images of individual species so, You need to find the images from the database so you need to format the output such that it is a json and has species array that has species concept as concept, image url as url, image id as image_id and species bounding box id as id.\nSince the prompt is asking for image that looks good without specifying what type of image would look good, find images that has highest bounding box width, height to image width, height ratio and show 10 top results\n\nJSON:```{\n    \"sqlQuery\": \"SELECT TOP 10 i.url, b.concept, b.id, i.id as image_id FROM dbo.bounding_boxes AS b JOIN dbo.images AS i ON b.image_id = i.id WHERE b.concept = 'Aurelia aurita' ORDER BY (b.width * b.height) / (i.width * i.height) DESC FOR JSON PATH\",\n    \"outputType\": \"images\",\n    \"responseText\": \"Here are some good images of Aurelia Aurita\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: Give data of all species in Monterey Bay to show in a heatmap"}, {"role": "assistant", "content": "Observation:The prompt asks to give data of all species in Monterey Bay to show in a heatmap. Since I am instructed not to use vega for heatmap, I will find the species from the database so you need to format the output such that it is a json and has species array that has species concept as concept and species bounding box id as id.\nAlso since the data will be shown in a heatmap, location data is very important, so you will add the latitude, longitude and depth data of the species. \nJSON:```{\n    \"sqlQuery\": \"SELECT    b.concept,    b.id,    i.latitude,    i.longitude,    i.depth_metersFROM    dbo.bounding_boxes b    JOIN dbo.images i ON b.image_id = i.id    JOIN dbo.marine_regions mr ON i.latitude BETWEEN mr.min_latitude AND mr.max_latitude        AND i.longitude BETWEEN mr.min_longitude AND mr.max_longitudeWHERE    mr.name = 'Monterey Bay'FOR JSON PATH\",\n    \"outputType\": \"heatmap\",\n    \"responseText\": \"Here is the heatmap of all species at Monterey Bay\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: Find me a place where Aurelia aurita is found the most"}, {"role": "assistant", "content": "Observation:Since the prompt is asking about the place where Aurelia aurita is found the most without specifying any region, you can use the marine_regions table along with the bounding_boxes table to find out the number of that species in a region. After that you can sort the data and get the result.\n\nJSON:```{\n    \"sqlQuery\": \"SELECT TOP 1 mr.name as region_name, COUNT(bb.id) as count FROM dbo.bounding_boxes bb JOIN dbo.images i ON bb.image_id = i.id JOIN dbo.marine_regions mr ON i.latitude BETWEEN mr.min_latitude AND mr.max_latitude AND i.longitude BETWEEN mr.min_longitude AND mr.max_longitude WHERE bb.concept = 'Aurelia aurita' GROUP BY mr.name ORDER BY count DESC FOR JSON PATH\",\n    \"outputType\": \"text\",\n    \"responseText\": \"Aurelia aurita is found the most in the region {region name} and it's count is {count}\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: Provide the data that correlates salinity levels with the distribution of Aurelia aurita"}, {"role": "assistant", "content": "Observation:The prompt asks to find correlation between salinity levels with the distribution of Aurelia aurita. Since the prompt does not provide the salinity levels, use the salinity level normally used to understand ocean water salinity level. So, use levels <32, 32-33, 33-34, 34-35, 35-36, 36-37, >37\nUse these region to find out, the distribution of the species in these regions. Also, make sure you include the 0 values, which will help user better understand that some region donot have the species.\n\nJSON:```{\n    \"sqlQuery\": \"WITH SalinityLevels AS (     SELECT '<32' AS salinity_level     UNION ALL     SELECT '32-33'     UNION ALL     SELECT '33-34'     UNION ALL     SELECT '34-35'     UNION ALL     SELECT '35-36'     UNION ALL     SELECT '36-37'     UNION ALL     SELECT '>37' ), AggregatedData AS (     SELECT          CASE              WHEN images.salinity < 32 THEN '<32'             WHEN images.salinity BETWEEN 32 AND 33 THEN '32-33'             WHEN images.salinity BETWEEN 33 AND 34 THEN '33-34'             WHEN images.salinity BETWEEN 34 AND 35 THEN '34-35'             WHEN images.salinity BETWEEN 35 AND 36 THEN '35-36'             WHEN images.salinity BETWEEN 36 AND 37 THEN '36-37'             WHEN images.salinity > 37 THEN '>37'         END AS salinity_level,         COUNT(bounding_boxes.concept) AS species_count     FROM          dbo.images     JOIN          dbo.bounding_boxes ON images.id = bounding_boxes.image_id     WHERE          bounding_boxes.concept = 'Aurelia aurita'     AND          images.salinity IS NOT NULL     GROUP BY          CASE              WHEN images.salinity < 32 THEN '<32'             WHEN images.salinity BETWEEN 32 AND 33 THEN '32-33'             WHEN images.salinity BETWEEN 33 AND 34 THEN '33-34'             WHEN images.salinity BETWEEN 34 AND 35 THEN '34-35'             WHEN images.salinity BETWEEN 35 AND 36 THEN '35-36'             WHEN images.salinity BETWEEN 36 AND 37 THEN '36-37'             WHEN images.salinity > 37 THEN '>37'         END ) SELECT      sl.salinity_level,     COALESCE(ad.species_count, 0) AS species_count FROM      SalinityLevels sl LEFT JOIN      AggregatedData ad ON sl.salinity_level = ad.salinity_level ORDER BY      salinity_level FOR JSON PATH;\",\n    \"outputType\": \"table\",\n    \"responseText\": \"The table below shows the salinity levels and the distribution of Aurelia aurita\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: Provide the data that correlates depth with the distribution of Aurelia aurita\n"}, {"role": "assistant", "content": "Observation:The prompt asks the correlation between depth with the distribution of Aurelia aurita. Since you are asked about depth, without providing the level of depths, it is better to use normal ocean depth levels like Epipelagic (0-200m), Mesopelagic (200-1000m), Bathypelagic (1000-4000m), Abyssopelagic (4000-6000m) and Hadalpelagic (>6000m).\nUse these region to find out, the number of the species in these regions. Also, make sure you include the 0 values, which will help user better understand that some region donot have the species.\n\nJSON:```{\n    \"sqlQuery\": \"WITH DepthLevels AS (    SELECT 'Epipelagic (0-200m)' AS depth_level, 0 AS min_depth, 200 AS max_depth    UNION ALL    SELECT 'Mesopelagic (200-1000m)', 200, 1000    UNION ALL    SELECT 'Bathypelagic (1000-4000m)', 1000, 4000    UNION ALL    SELECT 'Abyssopelagic (4000-6000m)', 4000, 6000    UNION ALL    SELECT 'Hadalpelagic (>6000m)', 6001, 1000000  -- assuming a large max value to capture everything > 6000),AggregatedData AS (    SELECT         CASE             WHEN images.depth_meters BETWEEN 0 AND 200 THEN 'Epipelagic (0-200m)'            WHEN images.depth_meters BETWEEN 200 AND 1000 THEN 'Mesopelagic (200-1000m)'            WHEN images.depth_meters BETWEEN 1000 AND 4000 THEN 'Bathypelagic (1000-4000m)'            WHEN images.depth_meters BETWEEN 4000 AND 6000 THEN 'Abyssopelagic (4000-6000m)'            WHEN images.depth_meters > 6000 THEN 'Hadalpelagic (>6000m)'        END AS depth_level,        COUNT(bounding_boxes.id) AS distribution    FROM         images     JOIN         bounding_boxes     ON         images.id = bounding_boxes.image_id    WHERE         bounding_boxes.concept = 'Aurelia aurita'    AND         images.depth_meters IS NOT NULL    GROUP BY         CASE             WHEN images.depth_meters BETWEEN 0 AND 200 THEN 'Epipelagic (0-200m)'            WHEN images.depth_meters BETWEEN 200 AND 1000 THEN 'Mesopelagic (200-1000m)'            WHEN images.depth_meters BETWEEN 1000 AND 4000 THEN 'Bathypelagic (1000-4000m)'            WHEN images.depth_meters BETWEEN 4000 AND 6000 THEN 'Abyssopelagic (4000-6000m)'            WHEN images.depth_meters > 6000 THEN 'Hadalpelagic (>6000m)'        END)SELECT     dl.depth_level,     COALESCE(ad.distribution, 0) AS distributionFROM     DepthLevels dlLEFT JOIN     AggregatedData ad ON dl.depth_level = ad.depth_levelORDER BY     dl.min_depth FOR JSON PATH;\",\n    \"outputType\": \"table\",\n    \"responseText\": \"The table below displays the various depths and the corresponding distribution of Aurelia aurita at those depths.\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: Find place that has the highest temperature and species that is found the most at that place\n"}, {"role": "assistant", "content": "Observation:You need to find the detail of specific species from the database. So you need to format the output such that it is a json and has species array that has species concept as concept and species bounding box id as id\nThe prompt has two section, first is to find the place that has the highest temperature. Since the prompt does not talk about how we should define a place, you should use the regions table and its minimum latitude/longitude. To find maximum temperature in a particular region, we should take the average of all temperature in images data in that region\nOnce the region with highest temperature is found out, now you should use the region minimum latitude, minimum longitude, maximum latitude, maximum longitude data to find the most found species in the region. \nAfter the species data is found, you need to generate output data in the json format and should have species concept as concept and species bounding box id as id. Also since the prompt is asking about maximum temperature and species count, add maximum temperature and species count in the response\n\nJSON:```{\n    \"sqlQuery\": \"WITH RegionAvgTemp AS (     SELECT          r.name as region_name,         AVG(i.temperature_celsius) as avg_temperature     FROM dbo.images i     JOIN dbo.marine_regions r ON          i.latitude BETWEEN r.min_latitude AND r.max_latitude AND         i.longitude BETWEEN r.min_longitude AND r.max_longitude     GROUP BY r.name ), MaxTempRegion AS (     SELECT TOP 1 region_name, avg_temperature     FROM RegionAvgTemp     ORDER BY avg_temperature ASC ), MostFoundSpecies AS (     SELECT          b.concept,          COUNT(*) as count     FROM dbo.bounding_boxes b     JOIN dbo.images i ON b.image_id = i.id     JOIN dbo.marine_regions r ON          i.latitude BETWEEN r.min_latitude AND r.max_latitude AND         i.longitude BETWEEN r.min_longitude AND r.max_longitude     JOIN MaxTempRegion m ON r.name = m.region_name     GROUP BY b.concept ) SELECT TOP 1 bb.id, mfs.concept, mfs.count, mtr.avg_temperature, mtr.region_name FROM MostFoundSpecies mfs JOIN dbo.bounding_boxes bb ON bb.concept = mfs.concept JOIN MaxTempRegion mtr ON 1=1 ORDER BY mfs.count ASC FOR JSON PATH;\",\n    \"outputType\": \"table\",\n    \"responseText\": \"The table below displays the various depths and the corresponding distribution of Aurelia aurita at those depths.\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: Find the species that are found in image with id 2256720\n"}, {"role": "assistant", "content": "Observation:You need to find the detail of specific species in an image from the database. So you need to format the output such that it is a json and has species array that has species concept as concept, image url as url, image id as image_id and species bounding box id as id\nSo, you need to search image table and bounding_boxes table using image id 2256720\nJSON:```{\n    \"sqlQuery\": \"SELECT b.concept, b.id, i.id as image_id, i.url as url FROM dbo.bounding_boxes AS b JOIN dbo.images AS i ON b.image_id = i.id WHERE b.image_id = 2256720 FOR JSON PATH;\",\n    \"outputType\": \"species\",\n    \"responseText\": \"The species that are found in image with id 2256720 are shown below\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: Find the species that is found in bounding box table with id 2258719"}, {"role": "assistant", "content": "Observation:You need to find the detail of specific species from the database. So you need to format the output such that it is a json and has species array that has species concept as concept and species bounding box id as id\n\nJSON:```{\n    \"sqlQuery\": \"SELECT concept, id FROM dbo.bounding_boxes  WHERE id = 2258719 FOR JSON PATH;\",\n    \"outputType\": \"species\",\n    \"responseText\": \"The species with bounding box id 2258719 is shown below\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: Identify the two species that most frequently appear together within a single image"}, {"role": "assistant", "content": "Observation:You need to find out any two species which are found the most in a single image, so you need to combine the bounding_boxes and compare the image_id of the two species.\n\nJSON:```SELECT TOP 1\n    bb1.concept AS species1, \n    bb2.concept AS species2, \n    COUNT(*) AS frequency\nFROM \n    dbo.bounding_boxes AS bb1\nJOIN \n    dbo.bounding_boxes AS bb2 \nON \n    bb1.image_id = bb2.image_id AND bb1.concept < bb2.concept\nGROUP BY \n    bb1.concept, \n    bb2.concept```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: Provide an image showcasing the highest concentration of Bathochordaeus stygius"}, {"role": "assistant", "content": "Observation:You need to find the image from the database so you need to format the output such that it is a json and has species array that has species concept as concept, image url as url, image id as image_id and species bounding box id as id\nAlso in this query asks for image that has many species within a single image, it would be better to include bounding box detail(x, y, width, height) of species\nSo, you will first find out the image that contains highest conceentration of the species. Once you get that data, you will format the result such that it is a json array with species id, image url, image_id and concept\n\nJSON:```{\n    \"sqlQuery\": \"WITH HighestConcentrationImage AS (    SELECT TOP 1        i.id as image_id,        COUNT(b.id) as concentration    FROM        dbo.images i    JOIN        dbo.bounding_boxes b ON i.id = b.image_id    WHERE        b.concept = 'Bathochordaeus stygius' OR b.alt_concept = 'Bathochordaeus stygius'    GROUP BY        i.id    ORDER BY        concentration DESC)SELECT     b.id,    b.concept,    i.url,    i.id as image_id,    b.x,    b.y,    b.width,    b.heightFROM     dbo.images iJOIN     dbo.bounding_boxes b ON i.id = b.image_idJOIN     HighestConcentrationImage hci ON hci.image_id = i.idWHERE     b.concept = 'Bathochordaeus stygius'FOR JSON PATH\",\n    \"outputType\": \"images\",\n    \"responseText\": \"Here are some images showcasing the highest concentration of Bathochordaeus stygius\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: In what pressure level is the species with bounding box id 2258729 living at"}, {"role": "assistant", "content": "Observation:You need to find the pressure level the species with bounding box id 2258729 living at so you can find it by first finding the image data such that it has image id same as the bounding box image id and then find the value that is in the pressure_dbar column\n\nJSON:```{\n    \"sqlQuery\": \"SELECT images.pressure_dbar FROM dbo.bounding_boxes JOIN dbo.images ON bounding_boxes.image_id = images.id WHERE bounding_boxes.id = 2258739 FOR JSON PATH\",\n    \"outputType\": \"text\",\n    \"responseText\": \"The species with bounding box id 2258729 living at pressure {pressure_dbar} dbar\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: Display a pie chart that correlates salinity levels with the distribution of Bathochordaeus stygius categorizing salinity levels from 30 to 38 with each level of width 1"}, {"role": "assistant", "content": "Observation:The prompt asks to display a chart, I will be using vega lite to display it. I should first generate the vega lite schema and then generate a sql query that outputs the data that will be used by vega lite according to the schema\nJSON:```{\n    \"vegaSchema\": \"{    '$schema': 'https://vega.github.io/schema/vega-lite/v4.json',    'description': 'A pie chart showing the correlation between salinity levels and the distribution of Bathochordaeus stygius.',    'mark': 'arc',    'encoding': {        'theta': {'field': 'count', 'type': 'quantitative'},        'color': {'field': 'salinity_range', 'type': 'nominal'}    }}\",\n    \"sqlQuery\": \"SELECT      CASE          WHEN salinity >= 30 AND salinity < 31 THEN '30-31'         WHEN salinity >= 31 AND salinity < 32 THEN '31-32'         WHEN salinity >= 32 AND salinity < 33 THEN '32-33'         WHEN salinity >= 33 AND salinity < 34 THEN '33-34'         WHEN salinity >= 34 AND salinity < 35 THEN '34-35'         WHEN salinity >= 35 AND salinity < 36 THEN '35-36'         WHEN salinity >= 36 AND salinity < 37 THEN '36-37'         WHEN salinity >= 37 AND salinity < 38 THEN '37-38'     END AS salinity_range,     COUNT(*) AS count FROM      dbo.images AS i JOIN      dbo.bounding_boxes AS b ON i.id = b.image_id WHERE      b.concept = 'Bathochordaeus stygius'     AND salinity >= 30 AND salinity < 38 GROUP BY      CASE          WHEN salinity >= 30 AND salinity < 31 THEN '30-31'         WHEN salinity >= 31 AND salinity < 32 THEN '31-32'         WHEN salinity >= 32 AND salinity < 33 THEN '32-33'         WHEN salinity >= 33 AND salinity < 34 THEN '33-34'         WHEN salinity >= 34 AND salinity < 35 THEN '34-35'         WHEN salinity >= 35 AND salinity < 36 THEN '35-36'         WHEN salinity >= 36 AND salinity < 37 THEN '36-37'         WHEN salinity >= 37 AND salinity < 38 THEN '37-38'     END ORDER BY      salinity_range FOR JSON PATH;\",\n    \"outputType\": \"vegaLite\",\n    \"responseText\": \"The table below displays the various depths and the corresponding distribution of Aurelia aurita at those depths.\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: Provide me few images of Asterias rubens, Acanthaster planci, Linckia laevigata, Protoreaster nodosus, Pycnopodia helianthoides\n"}, {"role": "assistant", "content": "Observation:You need to find the images from the database so you need to format the output such that it is a json and has species array that has species concept as concept, image url as url, image id as image_id and species bounding box id as id\nSince there may be many images in the database and the image count is not provided, you will search for only 5 images\nYou will search for the species in bounding boxes table with provided concepts and format it such that it has species id, image url, image_id and concept\nJSON:```{\n    \"sqlQuery\": \"SELECT TOP 5    i.url AS url,    b.concept AS concept,    b.id as id,    b.image_id as image_idFROM     dbo.bounding_boxes AS bJOIN     dbo.images AS i ON b.image_id = i.idWHERE     b.concept IN ('Asterias rubens', 'Acanthaster planci', 'Linckia laevigata', 'Protoreaster nodosus', 'Pycnopodia helianthoides')FOR JSON PATH\",\n    \"outputType\": \"images\",\n    \"responseText\": \"Here are few images of Asterias rubens, Acanthaster planci, Linckia laevigata, Protoreaster nodosus, Pycnopodia helianthoides\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: How many images of Pycnopodia helianthoides are in the database\n"}, {"role": "assistant", "content": "Observation:You need to provide the total number of images of species Pycnopodia helianthoides in the database.\nSo, you will search the bounding box table that has a row with concept 'Pycnopodia helianthoides'\n\nJSON:```{\n    \"sqlQuery\": \"SELECT COUNT(*) as TotalImages FROM dbo.bounding_boxes  WHERE concept = 'Pycnopodia helianthoides' FOR JSON PATH;\",\n    \"outputType\": \"text\",\n    \"responseText\": \"There are {TotalImages} images of Pycnopodia helianthoides are in the database\"\n}```"}]}
{"messages": [{"role": "system", "content": "You are a text-to-sql generator. You have a database of marine species. The sql should be generated in a way such that the response from sql is a json. You must generate the response in this json format\n                {\n                    \"sqlQuery\": \"\",//sql query used to retreive the data from the database\n                    \"outputType\": \"\",//enum(images, text, species, vegalite, table, heatmap)\n                    \"responseText\": \"\"//summary of the generated response\n                    \"vegaSchema\": \"\"//optional vega schema used to generate charts using Vegalite. Important: It should not be used when generating heatmap\n                }\n                "}, {"role": "user", "content": "\n                The database has the following structure.\n\n                CREATE TABLE \"dbo\".\"bounding_box_comments\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"bounding_box_uuid\"     \tuniqueidentifier NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"text\"                  \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"alternate_concept\"     \tvarchar(255) NULL,\n                    \"flagged\"               \tbit NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F71625CCD\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__3213E83F3E4C2D08\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"bounding_boxes_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"concept\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"group_of\"              \tbit NULL,\n                    \"height\"                \tint NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"observer\"              \tvarchar(256) NULL,\n                    \"occluded\"              \tbit NULL,\n                    \"truncated\"             \tbit NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"verification_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"verified\"              \tbit NULL,\n                    \"verifier\"              \tvarchar(256) NULL,\n                    \"width\"                 \tint NULL,\n                    \"x\"                     \tint NULL,\n                    \"y\"                     \tint NULL,\n                    \"image_id\"              \tbigint NULL,\n                    \"alt_concept\"           \tvarchar(255) NULL,\n                    \"user_defined_key\"      \tvarchar(56) NULL,\n                    CONSTRAINT \"PK__bounding__BE3894F99D30F28A\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"darwin_cores\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"access_rights\"         \tvarchar(1024) NULL,\n                    \"basis_of_record\"       \tvarchar(64) NULL,\n                    \"bibliographic_citation\"\tvarchar(512) NULL,\n                    \"collection_code\"       \tvarchar(64) NULL,\n                    \"collection_id\"         \tvarchar(2048) NULL,\n                    \"data_generalizations\"  \tvarchar(512) NULL,\n                    \"dataset_id\"            \tuniqueidentifier NULL,\n                    \"dataset_name\"          \tvarchar(255) NULL,\n                    \"dynamic_properties\"    \tvarchar(2048) NULL,\n                    \"information_withheld\"  \tvarchar(255) NULL,\n                    \"institution_code\"      \tvarchar(255) NULL,\n                    \"institution_id\"        \tvarchar(255) NULL,\n                    \"license\"               \tvarchar(2048) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"owner_institution_code\"\tvarchar(255) NULL,\n                    \"record_language\"       \tvarchar(35) NULL,\n                    \"record_references\"     \tvarchar(2048) NULL,\n                    \"record_type\"           \tvarchar(32) NULL,\n                    \"rights_holder\"         \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"image_set_upload_id\"   \tbigint NULL,\n                    CONSTRAINT \"PK__darwin_c__3213E83F92DAE497\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(255) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(255) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__3213E83F59FE1468\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"fathomnet_identities_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"api_key\"               \tvarchar(255) NULL,\n                    \"avatar_url\"            \tvarchar(2000) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"disabled\"              \tbit NULL,\n                    \"display_name\"          \tvarchar(255) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"expertise_rank\"        \tvarchar(32) NULL,\n                    \"firebase_uid\"          \tvarchar(64) NULL,\n                    \"job_title\"             \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"orcid\"                 \tvarchar(32) NULL,\n                    \"organization\"          \tvarchar(255) NULL,\n                    \"profile\"               \tvarchar(1024) NULL,\n                    \"role_data\"             \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"notification_frequency\"\tvarchar(32) NULL,\n                    CONSTRAINT \"PK__fathomne__BE3894F9CD98EF78\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"followed_topics\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"email\"                 \tvarchar(254) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"notification\"          \tbit NULL,\n                    \"target\"                \tvarchar(256) NULL,\n                    \"topic\"                 \tvarchar(32) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    CONSTRAINT \"PK__followed__3213E83F4A1EA9E0\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_set_uploads\"  (\n                    \"id\"                     \tbigint NOT NULL,\n                    \"contributors_email\"     \tvarchar(255) NULL,\n                    \"created_timestamp\"      \tdatetime2(6) NULL,\n                    \"format\"                 \tvarchar(255) NULL,\n                    \"last_updated_timestamp\" \tdatetime2(6) NULL,\n                    \"local_path\"             \tvarchar(2048) NULL,\n                    \"rejection_details\"      \tvarchar(255) NULL,\n                    \"rejection_reason\"       \tvarchar(255) NULL,\n                    \"remote_uri\"             \tvarchar(2048) NULL,\n                    \"sha256\"                 \tvarchar(64) NULL,\n                    \"status\"                 \tvarchar(255) NULL,\n                    \"status_update_timestamp\"\tdatetimeoffset(6) NULL,\n                    \"status_updater_email\"   \tvarchar(254) NULL,\n                    \"uuid\"                   \tuniqueidentifier NOT NULL,\n                    \"darwincore_id\"          \tbigint NULL,\n                    CONSTRAINT \"PK__image_se__3213E83F9C72A0E9\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"image_uploads_join\"  (\n                    \"imagesetupload_id\"\tbigint NOT NULL,\n                    \"image_id\"         \tbigint NOT NULL,\n                    CONSTRAINT \"PK__image_up__8A53EE0EBD9D776A\" PRIMARY KEY CLUSTERED(\"imagesetupload_id\",\"image_id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"submitter\"             \tvarchar(255) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(2048) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images__3213E83FD76E309F\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"images_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"contributors_email\"    \tvarchar(254) NULL,\n                    \"created_timestamp\"     \tdatetime2(6) NULL,\n                    \"depth_meters\"          \tfloat NULL,\n                    \"height\"                \tint NULL,\n                    \"imaging_type\"          \tvarchar(64) NULL,\n                    \"last_updated_timestamp\"\tdatetime2(6) NULL,\n                    \"last_validation\"       \tdatetimeoffset(6) NULL,\n                    \"latitude\"              \tfloat NULL,\n                    \"longitude\"             \tfloat NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"modified\"              \tdatetimeoffset(6) NULL,\n                    \"sha256\"                \tvarchar(64) NULL,\n                    \"timestamp\"             \tdatetimeoffset(6) NULL,\n                    \"url\"                   \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"valid\"                 \tbit NULL,\n                    \"width\"                 \tint NULL,\n                    \"altitude\"              \tfloat NULL,\n                    \"oxygen_ml_l\"           \tfloat NULL,\n                    \"pressure_dbar\"         \tfloat NULL,\n                    \"salinity\"              \tfloat NULL,\n                    \"temperature_celsius\"   \tfloat NULL,\n                    CONSTRAINT \"PK__images_a__BE3894F92DF6715C\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"marine_regions\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"max_latitude\"          \tfloat NOT NULL,\n                    \"max_longitude\"         \tfloat NOT NULL,\n                    \"min_latitude\"          \tfloat NOT NULL,\n                    \"min_longitude\"         \tfloat NOT NULL,\n                    \"mrgid\"                 \tbigint NULL,\n                    \"name\"                  \tvarchar(255) NULL,\n                    CONSTRAINT \"PK__marine_r__3213E83FE987FC8B\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"revinfo\"  (\n                    \"rev\"     \tint IDENTITY(1,1) NOT NULL,\n                    \"revtstmp\"\tbigint NULL,\n                    CONSTRAINT \"PK__revinfo__C2B7CC69D3938648\" PRIMARY KEY CLUSTERED(\"rev\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NOT NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NOT NULL,\n                    \"value\"                 \tvarchar(255) NOT NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags__3213E83F3A490684\" PRIMARY KEY CLUSTERED(\"id\")\n                ON [PRIMARY]);\n                CREATE TABLE \"dbo\".\"tags_aud\"  (\n                    \"id\"                    \tbigint NOT NULL,\n                    \"rev\"                   \tint NOT NULL,\n                    \"revtype\"               \tsmallint NULL,\n                    \"created_timestamp\"     \tdatetime2 NULL,\n                    \"tag\"                   \tvarchar(255) NULL,\n                    \"last_updated_timestamp\"\tdatetime2 NULL,\n                    \"media_type\"            \tvarchar(255) NULL,\n                    \"uuid\"                  \tuniqueidentifier NULL,\n                    \"value\"                 \tvarchar(255) NULL,\n                    \"image_id\"              \tbigint NULL,\n                    CONSTRAINT \"PK__tags_aud__BE3894F94F1608A8\" PRIMARY KEY CLUSTERED(\"id\",\"rev\")\n                ON [PRIMARY]);\n                CREATE VIEW \"dbo\".\"boundingbox_extended_info\" AS\n                SELECT\n                    b.concept,\n                    b.alt_concept,\n                    b.observer,\n                    b.verified,\n                    b.verifier,\n                    b.verification_timestamp,\n                    b.user_defined_key,\n                    i.url,\n                    i.width,\n                    i.height,\n                    i.submitter,\n                    i.[timestamp],\n                    i.contributors_email AS image_contributors_email,\n                    u.contributors_email AS upload_contributors_email,\n                    dc.owner_institution_code,\n                    dc.institution_code,\n                    dc.rights_holder,\n                    dc.collection_code,\n                    dc.collection_id,\n                    dc.dataset_name\n                FROM\n                    dbo.darwin_cores dc LEFT JOIN\n                    dbo.image_set_uploads u ON dc.id = u.darwincore_id LEFT JOIN\n                    dbo.image_uploads_join j ON j.imagesetupload_id = u.id LEFT JOIN\n                    dbo.images i ON j.image_id = i.id LEFT JOIN\n                    dbo.bounding_boxes b ON b.image_id = i.id\n                ;\n\n                First generate the observation from the prompt and how will you generate thq query, then only generate the json. Make sure the json is inside ```\n\n                Prompt: Find me some images that has Acanthaster planci, Chrysaora fuscescens and Siphonophorae\n"}, {"role": "assistant", "content": "Observation:You need to find the images from the database so you need to format the output such that it is a json and has species array that has species concept as concept, image url as url, image id as image_id and species bounding box id as id\nAlso in this query asks for image that has many species within a single image, it would be better to include bounding box detail(x, y, width, height) of species\nSo, you will first find out the image that contains all the three species. Also, since there may be many images in the database and the image count is not provided, you will search for only 5 images. Once you get that data, you will format the result such that it is a json array with species id, image url, image_id and concept\n\nJSON:```{\n    \"sqlQuery\": \"WITH ImageConcepts AS (     SELECT TOP 5 i.id as image_id     FROM dbo.images i     JOIN dbo.bounding_boxes b ON i.id = b.image_id     WHERE b.concept IN ('Aurelia aurita', 'Chrysaora fuscescens', 'Siphonophorae')     GROUP BY i.id     HAVING COUNT(DISTINCT b.concept) = 3 ) SELECT      b.id,     b.concept,     i.url,     i.id as image_id,     b.x,     b.y,     b.width,     b.height FROM      dbo.images i JOIN      dbo.bounding_boxes b ON i.id = b.image_id JOIN      ImageConcepts c ON c.image_id = i.id WHERE      b.concept IN ('Aurelia aurita', 'Chrysaora fuscescens', 'Siphonophorae') FOR JSON PATH\",\n    \"outputType\": \"images\",\n    \"responseText\": \"Here are some images that has Acanthaster planci, Chrysaora fuscescens and Siphonophorae\"\n}```"}]}
